(self["webpackChunkinvoice_generator"]=self["webpackChunkinvoice_generator"]||[]).push([[17],{5645:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-lightest-blue vh-100"},[t("div",{staticClass:"pv5 ph2"},[t("form",{staticClass:"ba b--dark-blue bw3 bg-white br2 mw6 w-40-m w-70 w-20-l center pa3 shadow-5",on:{submit:function(t){return t.preventDefault(),e.signIn.apply(null,arguments)}}},[t("h2",{staticClass:"ttc tc"},[e._v(" Sign In ")]),t("label",{staticClass:"db mb2 black-70",attrs:{for:"email"}},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"db mb3 w-100 br2 ph2 pv3 ba bw1 b--lightest-blue",attrs:{id:"email",name:"email",type:"email",placeholder:"example@email.com"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("label",{staticClass:"db mb2 black-70",attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"db mb3 w-100 br2 ph2 pv3 ba bw1 b--lightest-blue",attrs:{id:"password",name:"password",type:"password",placeholder:"••••••••"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("button",{staticClass:"center db pa3 mb3 tracked bg-dark-blue ba br3 white pointer hover-black hover-bg-lightest-blue bg-animate pointer",attrs:{type:"submit"}},[e._v(" Sign in ")])])])])},s=[],n=(a(7658),a(9170)),i={data:()=>({email:"",password:""}),methods:{async signIn(){const e=(0,n.d)(),t=await e.db.users.filter("email",this.email).getFirst();this.email&&this.password?this.email!==t.email||this.password!==t.password?(this.$notify({type:"error",text:"Incorrect credentials"}),this.email="",this.password=""):(this.$router.push({path:`/dashboard/${t.username}`,params:t}),this.$notify({type:"success",text:"Login successful!"})):this.$notify({type:"error",text:"Please fill all empty fields"})}}},o=i,c=a(1001),l=(0,c.Z)(o,r,s,!1,null,null,null),h=l.exports},4122:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-lightest-blue vh-100"},[t("div",{staticClass:"pv5 ph2"},[t("form",{staticClass:"ba b--dark-blue bw3 bg-white br2 mw6 w-40-m w-70 w-20-l center pa3 shadow-5",on:{submit:function(t){return t.preventDefault(),e.signUp.apply(null,arguments)}}},[t("h2",{staticClass:"ttc tc"},[e._v(" Sign up ")]),t("label",{staticClass:"db mb2 black-70",attrs:{for:"name"}},[e._v("Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"db mb3 w-100 br2 ph2 pv3 ba bw1 b--lightest-blue",attrs:{id:"name",name:"name",type:"text",placeholder:"John Doe"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("label",{staticClass:"db mb2 black-70",attrs:{for:"email"}},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"db mb3 w-100 br2 ph2 pv3 ba bw1 b--lightest-blue",attrs:{id:"email",name:"email",type:"email",placeholder:"example@email.com"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("label",{staticClass:"db mb2 black-70",attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"db mb3 w-100 br2 ph2 pv3 ba bw1 b--lightest-blue",attrs:{id:"password",name:"password",type:"password",placeholder:"••••••••"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("button",{staticClass:"center db pa3 mb3 tracked bg-dark-blue ba br3 white pointer hover-black hover-bg-lightest-blue bg-animate pointer",attrs:{type:"submit"}},[e._v(" Sign up ")]),e._m(0)])])])},s=[function(){var e=this,t=e._self._c;return t("p",[e._v("Already have an account? "),t("a",{staticClass:"black-70 b",attrs:{href:"/signin"}},[e._v("Sign in")])])}],n=(a(7658),a(9170)),i={name:"signup",data:()=>({username:"",email:"",password:""}),methods:{async signUp(){const e=(0,n.d)(),t=await e.db.users.filter("username",this.username).getFirst();t||(await e.db.users.create({username:this.username,password:this.password,email:this.email}).then((e=>{this.$router.push({path:`/dashboard/${e.username}`,params:t})})),this.$notify({type:"success",text:"Account creation successful!"}))}}},o=i,c=a(1001),l=(0,c.Z)(o,r,s,!1,null,null,null),h=l.exports},4674:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=4674,e.exports=t},9170:function(e,t,a){"use strict";a.d(t,{d:function(){return gr}});a(2801),a(7658);const r=async(e,t,a)=>await t({setAttributes:()=>{}}),s={KIND:"xata.trace.kind",VERSION:"xata.sdk.version",TABLE:"xata.table",HTTP_REQUEST_ID:"http.request_id",HTTP_STATUS_CODE:"http.status_code",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_USER_AGENT:"http.user_agent",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_ROUTE:"http.route",HTTP_TARGET:"http.target"};function n(e){return null!==e&&void 0!==e}function i(e){return e.filter(n)}function o(e){return Boolean(e)&&"object"===typeof e&&!Array.isArray(e)}function c(e){return null!==e&&void 0!==e}function l(e){return c(e)&&"string"===typeof e}function h(e){return c(e)&&Array.isArray(e)&&e.every(l)}function d(e){return c(e)&&"number"===typeof e}function u(e){try{return btoa(e)}catch(t){const a=Buffer;return a.from(e).toString("base64")}}function m(e,t){const a={...e};for(const[r,s]of Object.entries(t))o(s)&&o(a[r])?a[r]=m(a[r],s):a[r]=s;return a}function p(){try{if(o(process)&&o({NODE_ENV:"production",BASE_URL:"/"}))return{apiKey:{NODE_ENV:"production",BASE_URL:"/"}.XATA_API_KEY??b(),databaseURL:{NODE_ENV:"production",BASE_URL:"/"}.XATA_DATABASE_URL??g(),branch:{NODE_ENV:"production",BASE_URL:"/"}.XATA_BRANCH??f(),envBranch:{NODE_ENV:"production",BASE_URL:"/"}.VERCEL_GIT_COMMIT_REF??{NODE_ENV:"production",BASE_URL:"/"}.CF_PAGES_BRANCH??{NODE_ENV:"production",BASE_URL:"/"}.BRANCH,fallbackBranch:{NODE_ENV:"production",BASE_URL:"/"}.XATA_FALLBACK_BRANCH??w()}}catch(e){}try{if(o(Deno)&&o(Deno.env))return{apiKey:Deno.env.get("XATA_API_KEY")??b(),databaseURL:Deno.env.get("XATA_DATABASE_URL")??g(),branch:Deno.env.get("XATA_BRANCH")??f(),envBranch:Deno.env.get("VERCEL_GIT_COMMIT_REF")??Deno.env.get("CF_PAGES_BRANCH")??Deno.env.get("BRANCH"),fallbackBranch:Deno.env.get("XATA_FALLBACK_BRANCH")??w()}}catch(e){}return{apiKey:b(),databaseURL:g(),branch:f(),envBranch:void 0,fallbackBranch:w()}}function b(){try{return XATA_API_KEY}catch(e){return}}function g(){try{return XATA_DATABASE_URL}catch(e){return}}function f(){try{return XATA_BRANCH}catch(e){return}}function w(){try{return XATA_FALLBACK_BRANCH}catch(e){return}}async function y(){const e=["git","branch","--show-current"],t=e.join(" "),r=["child","process"].join("_"),s={encoding:"utf-8",stdio:["ignore","pipe","ignore"]};try{if("function"===typeof require)return require(r).execSync(t,s).trim();const{execSync:e}=await a(4674)(r);return e(t,s).toString().trim()}catch(n){}try{if(o(Deno)){const t=Deno.run({cmd:e,stdout:"piped",stderr:"null"});return(new TextDecoder).decode(await t.output()).trim()}}catch(n){}}function v(){try{const{apiKey:e}=p();return e}catch(e){return}}function k(e){const t="undefined"!==typeof fetch?fetch:void 0,a=e??t;if(!a)throw new Error("Couldn't find `fetch`. Install a fetch implementation such as `node-fetch` and pass it explicitly.");return a}const N="0.19.1";class A extends Error{constructor(e,t){super(e,t)}}class B extends A{constructor(e,t,a){super(P(t)),this.status=e,this.errors=T(t)?t.errors:void 0,this.requestId=a,t instanceof Error&&(this.stack=t.stack,this.cause=t.cause)}toString(){const e=super.toString();return`[${this.status}] (${this.requestId??"Unknown"}): ${e}`}}function T(e){return o(e)&&Array.isArray(e.errors)}function E(e){return o(e)&&l(e.message)}function P(e){return e instanceof Error?e.message:l(e)?e:E(e)?e.message:T(e)?"Bulk operation failed":"Unexpected error"}const I=(e,t={},a={})=>{const r=Object.entries(t).reduce(((e,[t,a])=>void 0===a||null===a?e:{...e,[t]:a}),{}),s=new URLSearchParams(r).toString(),n=s.length>0?`?${s}`:"",i=Object.entries(a).reduce(((e,[t,a])=>({...e,[t]:encodeURIComponent(String(a??"")).replace("%3A",":")})),{});return e.replace(/\{\w*\}/g,(e=>i[e.slice(1,-1)]))+n};function _({endpoint:e,path:t,workspacesApiUrl:a,apiUrl:r,pathParams:s={}}){if("dataPlane"===e){const e=l(a)?`${a}${t}`:a(t,s),r=l(s.workspace)?e.replace("{workspaceId}",String(s.workspace)):e;return l(s.region)?r.replace("{region}",String(s.region)):r}return`${r}${t}`}function x(e){const t=/.*:\/\/(?<host>[^/]+).*/,{groups:a}=t.exec(e)??{};return a?.host?{Host:a.host}:{}}async function S({url:e,method:t,body:a,headers:r,pathParams:n,queryParams:i,fetchImpl:o,apiKey:c,endpoint:l,apiUrl:h,workspacesApiUrl:d,trace:u,signal:m,clientID:p,sessionID:b}){return u(`${t.toUpperCase()} ${e}`,(async({setAttributes:u})=>{const g=_({endpoint:l,path:e,workspacesApiUrl:d,pathParams:n,apiUrl:h}),f=I(g,i,n),w=f.includes("localhost")?f.replace(/^[^.]+\./,"http://"):f;u({[s.HTTP_URL]:w,[s.HTTP_TARGET]:I(e,i,n)});const y=await o(w,{method:t.toUpperCase(),body:a?JSON.stringify(a):void 0,headers:{"Content-Type":"application/json","User-Agent":`Xata client-ts/${N}`,"X-Xata-Client-ID":p??"","X-Xata-Session-ID":b??"",...r,...x(f),Authorization:`Bearer ${c}`},signal:m});if(204===y.status)return{};const{host:v,protocol:k}=R(y.url),A=y.headers?.get("x-request-id")??void 0;u({[s.KIND]:"http",[s.HTTP_REQUEST_ID]:A,[s.HTTP_STATUS_CODE]:y.status,[s.HTTP_HOST]:v,[s.HTTP_SCHEME]:k?.replace(":","")});try{const e=await y.json();if(y.ok)return e;throw new B(y.status,e,A)}catch(T){throw new B(y.status,T,A)}}),{[s.HTTP_METHOD]:t.toUpperCase(),[s.HTTP_ROUTE]:e})}function R(e){try{const{host:t,protocol:a}=new URL(e);return{host:t,protocol:a}}catch(t){return{}}}const C=async e=>S({...e,endpoint:"dataPlane"}),O=(e,t)=>C({url:"/dbs",method:"get",...e,signal:t}),U=(e,t)=>C({url:"/dbs/{dbName}",method:"get",...e,signal:t}),D=(e,t)=>C({url:"/dbs/{dbName}",method:"put",...e,signal:t}),$=(e,t)=>C({url:"/dbs/{dbName}",method:"delete",...e,signal:t}),M=(e,t)=>C({url:"/dbs/{dbName}/metadata",method:"get",...e,signal:t}),W=(e,t)=>C({url:"/dbs/{dbName}/metadata",method:"patch",...e,signal:t}),L=(e,t)=>C({url:"/db/{dbBranchName}",method:"get",...e,signal:t}),q=(e,t)=>C({url:"/db/{dbBranchName}",method:"put",...e,signal:t}),z=(e,t)=>C({url:"/db/{dbBranchName}",method:"delete",...e,signal:t}),H=(e,t)=>C({url:"/db/{dbBranchName}/metadata",method:"put",...e,signal:t}),j=(e,t)=>C({url:"/db/{dbBranchName}/metadata",method:"get",...e,signal:t}),K=(e,t)=>C({url:"/db/{dbBranchName}/stats",method:"get",...e,signal:t}),V=(e,t)=>C({url:"/dbs/{dbName}/gitBranches",method:"get",...e,signal:t}),X=(e,t)=>C({url:"/dbs/{dbName}/gitBranches",method:"post",...e,signal:t}),F=(e,t)=>C({url:"/dbs/{dbName}/gitBranches",method:"delete",...e,signal:t}),Q=(e,t)=>C({url:"/dbs/{dbName}/resolveBranch",method:"get",...e,signal:t}),G=(e,t)=>C({url:"/db/{dbBranchName}/migrations",method:"get",...e,signal:t}),J=(e,t)=>C({url:"/db/{dbBranchName}/migrations/plan",method:"post",...e,signal:t}),Y=(e,t)=>C({url:"/db/{dbBranchName}/migrations/execute",method:"post",...e,signal:t}),Z=(e,t)=>C({url:"/dbs/{dbName}/migrations/query",method:"post",...e,signal:t}),ee=(e,t)=>C({url:"/dbs/{dbName}/migrations",method:"post",...e,signal:t}),te=(e,t)=>C({url:"/dbs/{dbName}/migrations/{mrNumber}",method:"get",...e,signal:t}),ae=(e,t)=>C({url:"/dbs/{dbName}/migrations/{mrNumber}",method:"patch",...e,signal:t}),re=(e,t)=>C({url:"/dbs/{dbName}/migrations/{mrNumber}/commits",method:"post",...e,signal:t}),se=(e,t)=>C({url:"/dbs/{dbName}/migrations/{mrNumber}/compare",method:"post",...e,signal:t}),ne=(e,t)=>C({url:"/dbs/{dbName}/migrations/{mrNumber}/merge",method:"get",...e,signal:t}),ie=(e,t)=>C({url:"/dbs/{dbName}/migrations/{mrNumber}/merge",method:"post",...e,signal:t}),oe=(e,t)=>C({url:"/db/{dbBranchName}/schema/history",method:"post",...e,signal:t}),ce=(e,t)=>C({url:"/db/{dbBranchName}/schema/compare",method:"post",...e,signal:t}),le=(e,t)=>C({url:"/db/{dbBranchName}/schema/compare/{branchName}",method:"post",...e,signal:t}),he=(e,t)=>C({url:"/db/{dbBranchName}/schema/update",method:"post",...e,signal:t}),de=(e,t)=>C({url:"/db/{dbBranchName}/schema/preview",method:"post",...e,signal:t}),ue=(e,t)=>C({url:"/db/{dbBranchName}/schema/apply",method:"post",...e,signal:t}),me=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}",method:"put",...e,signal:t}),pe=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}",method:"delete",...e,signal:t}),be=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}",method:"patch",...e,signal:t}),ge=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/schema",method:"get",...e,signal:t}),fe=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/schema",method:"put",...e,signal:t}),we=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/columns",method:"get",...e,signal:t}),ye=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/columns",method:"post",...e,signal:t}),ve=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/columns/{columnName}",method:"get",...e,signal:t}),ke=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/columns/{columnName}",method:"patch",...e,signal:t}),Ne=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/columns/{columnName}",method:"delete",...e,signal:t}),Ae=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/data",method:"post",...e,signal:t}),Be=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"get",...e,signal:t}),Te=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"put",...e,signal:t}),Ee=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"patch",...e,signal:t}),Pe=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"post",...e,signal:t}),Ie=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/data/{recordId}",method:"delete",...e,signal:t}),_e=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/bulk",method:"post",...e,signal:t}),xe=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/query",method:"post",...e,signal:t}),Se=(e,t)=>C({url:"/db/{dbBranchName}/search",method:"post",...e,signal:t}),Re=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/search",method:"post",...e,signal:t}),Ce=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/summarize",method:"post",...e,signal:t}),Oe=(e,t)=>C({url:"/db/{dbBranchName}/tables/{tableName}/aggregate",method:"post",...e,signal:t}),Ue={database:{dEPRECATEDgetDatabaseList:O,dEPRECATEDcreateDatabase:D,dEPRECATEDdeleteDatabase:$,dEPRECATEDgetDatabaseMetadata:M,dEPRECATEDupdateDatabaseMetadata:W},branch:{getBranchList:U,getBranchDetails:L,createBranch:q,deleteBranch:z,updateBranchMetadata:H,getBranchMetadata:j,getBranchStats:K,getGitBranchesMapping:V,addGitBranchesEntry:X,removeGitBranchesEntry:F,resolveBranch:Q},migrations:{getBranchMigrationHistory:G,getBranchMigrationPlan:J,executeBranchMigrationPlan:Y,getBranchSchemaHistory:oe,compareBranchWithUserSchema:ce,compareBranchSchemas:le,updateBranchSchema:he,previewBranchSchemaEdit:de,applyBranchSchemaEdit:ue},migrationRequests:{queryMigrationRequests:Z,createMigrationRequest:ee,getMigrationRequest:te,updateMigrationRequest:ae,listMigrationRequestsCommits:re,compareMigrationRequest:se,getMigrationRequestIsMerged:ne,mergeMigrationRequest:ie},table:{createTable:me,deleteTable:pe,updateTable:be,getTableSchema:ge,setTableSchema:fe,getTableColumns:we,addTableColumn:ye,getColumn:ve,updateColumn:ke,deleteColumn:Ne},records:{insertRecord:Ae,getRecord:Be,insertRecordWithID:Te,updateRecordWithID:Ee,upsertRecordWithID:Pe,deleteRecord:Ie,bulkInsertTableRecords:_e},searchAndFilter:{queryTable:xe,searchBranch:Se,searchTable:Re,summarizeTable:Ce,aggregateTable:Oe}},De=async e=>S({...e,endpoint:"controlPlane"}),$e=(e,t)=>De({url:"/user",method:"get",...e,signal:t}),Me=(e,t)=>De({url:"/user",method:"put",...e,signal:t}),We=(e,t)=>De({url:"/user",method:"delete",...e,signal:t}),Le=(e,t)=>De({url:"/user/keys",method:"get",...e,signal:t}),qe=(e,t)=>De({url:"/user/keys/{keyName}",method:"post",...e,signal:t}),ze=(e,t)=>De({url:"/user/keys/{keyName}",method:"delete",...e,signal:t}),He=(e,t)=>De({url:"/workspaces",method:"get",...e,signal:t}),je=(e,t)=>De({url:"/workspaces",method:"post",...e,signal:t}),Ke=(e,t)=>De({url:"/workspaces/{workspaceId}",method:"get",...e,signal:t}),Ve=(e,t)=>De({url:"/workspaces/{workspaceId}",method:"put",...e,signal:t}),Xe=(e,t)=>De({url:"/workspaces/{workspaceId}",method:"delete",...e,signal:t}),Fe=(e,t)=>De({url:"/workspaces/{workspaceId}/members",method:"get",...e,signal:t}),Qe=(e,t)=>De({url:"/workspaces/{workspaceId}/members/{userId}",method:"put",...e,signal:t}),Ge=(e,t)=>De({url:"/workspaces/{workspaceId}/members/{userId}",method:"delete",...e,signal:t}),Je=(e,t)=>De({url:"/workspaces/{workspaceId}/invites",method:"post",...e,signal:t}),Ye=(e,t)=>De({url:"/workspaces/{workspaceId}/invites/{inviteId}",method:"patch",...e,signal:t}),Ze=(e,t)=>De({url:"/workspaces/{workspaceId}/invites/{inviteId}",method:"delete",...e,signal:t}),et=(e,t)=>De({url:"/workspaces/{workspaceId}/invites/{inviteKey}/accept",method:"post",...e,signal:t}),tt=(e,t)=>De({url:"/workspaces/{workspaceId}/invites/{inviteId}/resend",method:"post",...e,signal:t}),at=(e,t)=>De({url:"/workspaces/{workspaceId}/dbs",method:"get",...e,signal:t}),rt=(e,t)=>De({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"put",...e,signal:t}),st=(e,t)=>De({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"delete",...e,signal:t}),nt=(e,t)=>De({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"get",...e,signal:t}),it=(e,t)=>De({url:"/workspaces/{workspaceId}/dbs/{dbName}",method:"patch",...e,signal:t}),ot=(e,t)=>De({url:"/workspaces/{workspaceId}/regions",method:"get",...e,signal:t}),ct={users:{getUser:$e,updateUser:Me,deleteUser:We},authentication:{getUserAPIKeys:Le,createUserAPIKey:qe,deleteUserAPIKey:ze},workspaces:{getWorkspacesList:He,createWorkspace:je,getWorkspace:Ke,updateWorkspace:Ve,deleteWorkspace:Xe,getWorkspaceMembersList:Fe,updateWorkspaceMemberRole:Qe,removeWorkspaceMember:Ge},invites:{inviteWorkspaceMember:Je,updateWorkspaceMemberInvite:Ye,cancelWorkspaceMemberInvite:Ze,acceptWorkspaceMemberInvite:et,resendWorkspaceMemberInvite:tt},databases:{getDatabaseList:at,createDatabase:rt,deleteDatabase:st,getDatabaseMetadata:nt,updateDatabaseMetadata:it,listRegions:ot}};m(Ue,ct);function lt(e){if(!l(e))return null;const t=/(?:https:\/\/)?([^.]+)(?:\.([^.]+))?\.xata\.sh.*/,a=/(?:https:\/\/)?([^.]+)\.staging(?:\.([^.]+))?\.xatabase\.co.*/,r=e.match(t)||e.match(a);return r?{workspace:r[1],region:r[2]??"eu-west-1"}:null}new WeakMap,new WeakMap;class ht{}function dt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}))}function ut(e){if(!e)return;const t=Object.values(e).filter(Boolean).filter((e=>!Array.isArray(e)||e.length>0));return t.length>0?e:void 0}var mt,pt,bt=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},gt=(e,t,a)=>(bt(e,t,"read from private field"),a?a.call(e):t.get(e)),ft=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},wt=(e,t,a,r)=>(bt(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a);class yt{constructor(e,t,a=[]){ft(this,mt,void 0),wt(this,mt,e),this.meta=t,this.records=new Bt(this,a)}async nextPage(e,t){return gt(this,mt).getPaginated({pagination:{size:e,offset:t,after:this.meta.page.cursor}})}async previousPage(e,t){return gt(this,mt).getPaginated({pagination:{size:e,offset:t,before:this.meta.page.cursor}})}async firstPage(e,t){return gt(this,mt).getPaginated({pagination:{size:e,offset:t,first:this.meta.page.cursor}})}async lastPage(e,t){return gt(this,mt).getPaginated({pagination:{size:e,offset:t,last:this.meta.page.cursor}})}hasNextPage(){return this.meta.page.more}}mt=new WeakMap;const vt=200,kt=20;function Nt(e){return c(e)&&(c(e.first)||c(e.last)||c(e.after)||c(e.before))}const At=class extends Array{constructor(...e){super(...At.parseConstructorParams(...e)),ft(this,pt,void 0),wt(this,pt,o(e[0]?.meta)?e[0]:{meta:{page:{cursor:"",more:!1}},records:[]})}static parseConstructorParams(...e){if(1===e.length&&"number"===typeof e[0])return new Array(e[0]);if(e.length<=2&&o(e[0]?.meta)&&Array.isArray(e[1]??[])){const t=e[1]??e[0].records??[];return new Array(...t)}return new Array(...e)}toArray(){return new Array(...this)}map(e,t){return this.toArray().map(e,t)}async nextPage(e,t){const a=await gt(this,pt).nextPage(e,t);return new At(a)}async previousPage(e,t){const a=await gt(this,pt).previousPage(e,t);return new At(a)}async firstPage(e,t){const a=await gt(this,pt).firstPage(e,t);return new At(a)}async lastPage(e,t){const a=await gt(this,pt).lastPage(e,t);return new At(a)}hasNextPage(){return gt(this,pt).meta.page.more}};let Bt=At;pt=new WeakMap;var Tt,Et,Pt,It,_t,xt=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},St=(e,t,a)=>(xt(e,t,"read from private field"),a?a.call(e):t.get(e)),Rt=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},Ct=(e,t,a,r)=>(xt(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a),Ot=(e,t,a)=>(xt(e,t,"access private method"),a);const Ut=class{constructor(e,t,a,r){Rt(this,It),Rt(this,Tt,void 0),Rt(this,Et,void 0),Rt(this,Pt,{filter:{}}),this.meta={page:{cursor:"start",more:!0}},this.records=new Bt(this,[]),Ct(this,Tt,t),Ct(this,Et,e||this);const s=$t(a,r);St(this,Pt).filter=a.filter??s?.filter??{},St(this,Pt).filter.$any=a.filter?.$any??s?.filter?.$any,St(this,Pt).filter.$all=a.filter?.$all??s?.filter?.$all,St(this,Pt).filter.$not=a.filter?.$not??s?.filter?.$not,St(this,Pt).filter.$none=a.filter?.$none??s?.filter?.$none,St(this,Pt).sort=a.sort??s?.sort,St(this,Pt).columns=a.columns??s?.columns,St(this,Pt).pagination=a.pagination??s?.pagination,St(this,Pt).cache=a.cache??s?.cache,this.any=this.any.bind(this),this.all=this.all.bind(this),this.not=this.not.bind(this),this.filter=this.filter.bind(this),this.sort=this.sort.bind(this),this.none=this.none.bind(this),Object.defineProperty(this,"table",{enumerable:!1}),Object.defineProperty(this,"repository",{enumerable:!1})}getQueryOptions(){return St(this,Pt)}key(){const{columns:e=[],filter:t={},sort:a=[],pagination:r={}}=St(this,Pt),s=JSON.stringify({columns:e,filter:t,sort:a,pagination:r});return u(s)}any(...e){const t=e.map((e=>e.getQueryOptions().filter??{}));return new Ut(St(this,Et),St(this,Tt),{filter:{$any:t}},St(this,Pt))}all(...e){const t=e.map((e=>e.getQueryOptions().filter??{}));return new Ut(St(this,Et),St(this,Tt),{filter:{$all:t}},St(this,Pt))}not(...e){const t=e.map((e=>e.getQueryOptions().filter??{}));return new Ut(St(this,Et),St(this,Tt),{filter:{$not:t}},St(this,Pt))}none(...e){const t=e.map((e=>e.getQueryOptions().filter??{}));return new Ut(St(this,Et),St(this,Tt),{filter:{$none:t}},St(this,Pt))}filter(e,t){if(1===arguments.length){const t=Object.entries(e??{}).map((([e,t])=>({[e]:Ot(this,It,_t).call(this,e,t)}))),a=i([St(this,Pt).filter?.$all].flat().concat(t));return new Ut(St(this,Et),St(this,Tt),{filter:{$all:a}},St(this,Pt))}{const a=c(e)&&c(t)?[{[e]:Ot(this,It,_t).call(this,e,t)}]:void 0,r=i([St(this,Pt).filter?.$all].flat().concat(a));return new Ut(St(this,Et),St(this,Tt),{filter:{$all:r}},St(this,Pt))}}sort(e,t="asc"){const a=[St(this,Pt).sort??[]].flat(),r=[...a,{column:e,direction:t}];return new Ut(St(this,Et),St(this,Tt),{sort:r},St(this,Pt))}select(e){return new Ut(St(this,Et),St(this,Tt),{columns:e},St(this,Pt))}getPaginated(e={}){const t=new Ut(St(this,Et),St(this,Tt),e,St(this,Pt));return St(this,Et).query(t)}async*[Symbol.asyncIterator](){for await(const[e]of this.getIterator({batchSize:1}))yield e}async*getIterator(e={}){const{batchSize:t=1}=e;let a=await this.getPaginated({...e,pagination:{size:t,offset:0}}),r=a.hasNextPage();yield a.records;while(r)a=await a.nextPage(),r=a.hasNextPage(),yield a.records}async getMany(e={}){const{pagination:t={},...a}=e,{size:r=kt,offset:s}=t,n=r<=vt?r:vt;let i=await this.getPaginated({...a,pagination:{size:n,offset:s}});const o=[...i.records];while(i.hasNextPage()&&o.length<r)i=await i.nextPage(),o.push(...i.records);i.hasNextPage()&&void 0===e.pagination?.size&&console.trace("Calling getMany does not return all results. Paginate to get all results or call getAll.");const c=new Bt(i,o.slice(0,r));return c}async getAll(e={}){const{batchSize:t=vt,...a}=e,r=[];for await(const s of this.getIterator({...a,batchSize:t}))r.push(...s);return r}async getFirst(e={}){const t=await this.getMany({...e,pagination:{size:1}});return t[0]??null}async getFirstOrThrow(e={}){const t=await this.getMany({...e,pagination:{size:1}});if(void 0===t[0])throw new Error("No results found.");return t[0]}async summarize(e={}){const{summaries:t,summariesFilter:a,...r}=e,s=new Ut(St(this,Et),St(this,Tt),r,St(this,Pt));return St(this,Et).summarizeTable(s,t,a)}cache(e){return new Ut(St(this,Et),St(this,Tt),{cache:e},St(this,Pt))}nextPage(e,t){return this.firstPage(e,t)}previousPage(e,t){return this.firstPage(e,t)}firstPage(e,t){return this.getPaginated({pagination:{size:e,offset:t}})}lastPage(e,t){return this.getPaginated({pagination:{size:e,offset:t,before:"end"}})}hasNextPage(){return this.meta.page.more}};let Dt=Ut;function $t(e,t){return Nt(e.pagination)?{...t,sort:void 0,filter:void 0}:t}function Mt(e){return o(e)&&l(e?.id)}function Wt(e){return l(e)}function Lt(e){return o(e)&&Object.values(e).every((e=>"asc"===e||"desc"===e))}function qt(e){return o(e)&&!Lt(e)&&void 0!==e.column}function zt(e){if(Wt(e))return{[e]:"asc"};if(Array.isArray(e))return e.map((e=>zt(e)));if(Lt(e))return e;if(qt(e))return{[e.column]:e.direction??"asc"};throw new Error(`Invalid sort filter: ${e}`)}Tt=new WeakMap,Et=new WeakMap,Pt=new WeakMap,It=new WeakSet,_t=function(e,t){const a=St(this,Tt).schema?.columns.find((({name:t})=>t===e))?.type;return"multiple"===a&&(l(t)||h(t))?{$includes:t}:"link"===a&&o(t)&&l(t.id)?t.id:t};var Ht,jt,Kt,Vt,Xt,Ft,Qt,Gt,Jt,Yt,Zt,ea,ta,aa,ra,sa,na,ia,oa,ca,la,ha,da,ua,ma=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},pa=(e,t,a)=>(ma(e,t,"read from private field"),a?a.call(e):t.get(e)),ba=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},ga=(e,t,a,r)=>(ma(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a),fa=(e,t,a)=>(ma(e,t,"access private method"),a);class wa extends Dt{constructor(e){super(null,{name:e.table,schema:e.schemaTables?.find((t=>t.name===e.table))},{}),ba(this,Qt),ba(this,Jt),ba(this,Zt),ba(this,ta),ba(this,ra),ba(this,na),ba(this,oa),ba(this,la),ba(this,da),ba(this,Ht,void 0),ba(this,jt,void 0),ba(this,Kt,void 0),ba(this,Vt,void 0),ba(this,Xt,void 0),ba(this,Ft,void 0),ga(this,Ht,e.table),ga(this,Kt,e.db),ga(this,Vt,e.pluginOptions.cache),ga(this,Xt,e.schemaTables),ga(this,jt,(async()=>{const t=await e.pluginOptions.getFetchProps();return{...t,sessionID:dt()}}));const t=e.pluginOptions.trace??r;ga(this,Ft,(async(e,a,r={})=>t(e,a,{...r,[s.TABLE]:pa(this,Ht),[s.KIND]:"sdk-operation",[s.VERSION]:N})))}async create(e,t,a,r){return pa(this,Ft).call(this,"create",(async()=>{const s=Ba(t,a,r);if(Array.isArray(e)){if(0===e.length)return[];const a=h(t)?t:void 0;return fa(this,Zt,ea).call(this,e,a)}if(l(e)&&o(t)){if(""===e)throw new Error("The id can't be empty");const r=h(a)?a:void 0;return fa(this,Jt,Yt).call(this,e,t,r,{createOnly:!0,ifVersion:s})}if(o(e)&&l(e.id)){if(""===e.id)throw new Error("The id can't be empty");const a=h(t)?t:void 0;return fa(this,Jt,Yt).call(this,e.id,{...e,id:void 0},a,{createOnly:!0,ifVersion:s})}if(o(e)){const a=h(t)?t:void 0;return fa(this,Qt,Gt).call(this,e,a)}throw new Error("Invalid arguments for create method")}))}async read(e,t){return pa(this,Ft).call(this,"read",(async()=>{const a=h(t)?t:["*"];if(Array.isArray(e)){if(0===e.length)return[];const t=e.map((e=>Na(e))),r=await this.getAll({filter:{id:{$any:i(t)}},columns:a}),s=r.reduce(((e,t)=>(e[t.id]=t,e)),{});return t.map((e=>s[e??""]??null))}const r=Na(e);if(r){const e=await pa(this,jt).call(this);try{const t=await Be({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht),recordId:r},queryParams:{columns:a},...e}),s=await fa(this,da,ua).call(this);return va(pa(this,Kt),s,pa(this,Ht),t,a)}catch(s){if(o(s)&&404===s.status)return null;throw s}}return null}))}async readOrThrow(e,t){return pa(this,Ft).call(this,"readOrThrow",(async()=>{const a=await this.read(e,t);if(Array.isArray(a)){const t=i(e.filter(((e,t)=>null===a[t])).map((e=>Na(e))));if(t.length>0)throw new Error(`Could not find records with ids: ${t.join(", ")}`);return a}if(null===a){const t=Na(e)??"unknown";throw new Error(`Record with id ${t} not found`)}return a}))}async update(e,t,a,r){return pa(this,Ft).call(this,"update",(async()=>{const s=Ba(t,a,r);if(Array.isArray(e)){if(0===e.length)return[];e.length>100&&console.warn("Bulk update operation is not optimized in the Xata API yet, this request might be slow");const a=h(t)?t:["*"];return Promise.all(e.map((e=>this.update(e,a))))}if(l(e)&&o(t)){const r=h(a)?a:void 0;return fa(this,ta,aa).call(this,e,t,r,{ifVersion:s})}if(o(e)&&l(e.id)){const a=h(t)?t:void 0;return fa(this,ta,aa).call(this,e.id,{...e,id:void 0},a,{ifVersion:s})}throw new Error("Invalid arguments for update method")}))}async updateOrThrow(e,t,a,r){return pa(this,Ft).call(this,"updateOrThrow",(async()=>{const s=await this.update(e,t,a,r);if(Array.isArray(s)){const t=i(e.filter(((e,t)=>null===s[t])).map((e=>Na(e))));if(t.length>0)throw new Error(`Could not find records with ids: ${t.join(", ")}`);return s}if(null===s){const t=Na(e)??"unknown";throw new Error(`Record with id ${t} not found`)}return s}))}async createOrUpdate(e,t,a,r){return pa(this,Ft).call(this,"createOrUpdate",(async()=>{const s=Ba(t,a,r);if(Array.isArray(e)){if(0===e.length)return[];e.length>100&&console.warn("Bulk update operation is not optimized in the Xata API yet, this request might be slow");const a=h(t)?t:["*"];return Promise.all(e.map((e=>this.createOrUpdate(e,a))))}if(l(e)&&o(t)){const r=h(a)?a:void 0;return fa(this,ra,sa).call(this,e,t,r,{ifVersion:s})}if(o(e)&&l(e.id)){const t=h(a)?a:void 0;return fa(this,ra,sa).call(this,e.id,{...e,id:void 0},t,{ifVersion:s})}throw new Error("Invalid arguments for createOrUpdate method")}))}async createOrReplace(e,t,a,r){return pa(this,Ft).call(this,"createOrReplace",(async()=>{const s=Ba(t,a,r);if(Array.isArray(e)){if(0===e.length)return[];const a=h(t)?t:["*"];return fa(this,Zt,ea).call(this,e,a)}if(l(e)&&o(t)){const r=h(a)?a:void 0;return fa(this,Jt,Yt).call(this,e,t,r,{createOnly:!1,ifVersion:s})}if(o(e)&&l(e.id)){const t=h(a)?a:void 0;return fa(this,Jt,Yt).call(this,e.id,{...e,id:void 0},t,{createOnly:!1,ifVersion:s})}throw new Error("Invalid arguments for createOrReplace method")}))}async delete(e,t){return pa(this,Ft).call(this,"delete",(async()=>{if(Array.isArray(e))return 0===e.length?[]:(e.length>100&&console.warn("Bulk delete operation is not optimized in the Xata API yet, this request might be slow"),Promise.all(e.map((e=>this.delete(e,t)))));if(l(e))return fa(this,na,ia).call(this,e,t);if(o(e)&&l(e.id))return fa(this,na,ia).call(this,e.id,t);throw new Error("Invalid arguments for delete method")}))}async deleteOrThrow(e,t){return pa(this,Ft).call(this,"deleteOrThrow",(async()=>{const a=await this.delete(e,t);if(Array.isArray(a)){const t=i(e.filter(((e,t)=>null===a[t])).map((e=>Na(e))));if(t.length>0)throw new Error(`Could not find records with ids: ${t.join(", ")}`);return a}if(null===a){const t=Na(e)??"unknown";throw new Error(`Record with id ${t} not found`)}return a}))}async search(e,t={}){return pa(this,Ft).call(this,"search",(async()=>{const a=await pa(this,jt).call(this),{records:r}=await Re({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht)},body:{query:e,fuzziness:t.fuzziness,prefix:t.prefix,highlight:t.highlight,filter:t.filter,boosters:t.boosters},...a}),s=await fa(this,da,ua).call(this);return r.map((e=>va(pa(this,Kt),s,pa(this,Ht),e,["*"])))}))}async aggregate(e,t){return pa(this,Ft).call(this,"aggregate",(async()=>{const a=await pa(this,jt).call(this),r=await Oe({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht)},body:{aggs:e,filter:t},...a});return r}))}async query(e){return pa(this,Ft).call(this,"query",(async()=>{const t=await fa(this,la,ha).call(this,e);if(t)return new yt(e,t.meta,t.records);const a=e.getQueryOptions(),r=await pa(this,jt).call(this),{meta:s,records:n}=await xe({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht)},body:{filter:ut(a.filter),sort:void 0!==a.sort?zt(a.sort):void 0,page:a.pagination,columns:a.columns??["*"]},...r}),i=await fa(this,da,ua).call(this),o=n.map((e=>va(pa(this,Kt),i,pa(this,Ht),e,a.columns??["*"])));return await fa(this,oa,ca).call(this,e,s,o),new yt(e,s,o)}))}async summarizeTable(e,t,a){return pa(this,Ft).call(this,"summarize",(async()=>{const r=e.getQueryOptions(),s=await pa(this,jt).call(this),n=await Ce({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht)},body:{filter:ut(r.filter),sort:void 0!==r.sort?zt(r.sort):void 0,columns:r.columns,page:void 0!==r.pagination?.size?{size:r.pagination?.size}:void 0,summaries:t,summariesFilter:a},...s});return n}))}}Ht=new WeakMap,jt=new WeakMap,Kt=new WeakMap,Vt=new WeakMap,Xt=new WeakMap,Ft=new WeakMap,Qt=new WeakSet,Gt=async function(e,t=["*"]){const a=await pa(this,jt).call(this),r=ya(e),s=await Ae({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht)},queryParams:{columns:t},body:r,...a}),n=await fa(this,da,ua).call(this);return va(pa(this,Kt),n,pa(this,Ht),s,t)},Jt=new WeakSet,Yt=async function(e,t,a=["*"],{createOnly:r,ifVersion:s}){const n=await pa(this,jt).call(this),i=ya(t),o=await Te({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht),recordId:e},body:i,queryParams:{createOnly:r,columns:a,ifVersion:s},...n}),c=await fa(this,da,ua).call(this);return va(pa(this,Kt),c,pa(this,Ht),o,a)},Zt=new WeakSet,ea=async function(e,t=["*"]){const a=await pa(this,jt).call(this),r=e.map((e=>ya(e))),s=await _e({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht)},queryParams:{columns:t},body:{records:r},...a});if(!ka(s))throw new Error("Request included columns but server didn't include them");const n=await fa(this,da,ua).call(this);return s.records?.map((e=>va(pa(this,Kt),n,pa(this,Ht),e,t)))},ta=new WeakSet,aa=async function(e,t,a=["*"],{ifVersion:r}){const s=await pa(this,jt).call(this),n=ya(t);try{const t=await Ee({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht),recordId:e},queryParams:{columns:a,ifVersion:r},body:n,...s}),i=await fa(this,da,ua).call(this);return va(pa(this,Kt),i,pa(this,Ht),t,a)}catch(i){if(o(i)&&404===i.status)return null;throw i}},ra=new WeakSet,sa=async function(e,t,a=["*"],{ifVersion:r}){const s=await pa(this,jt).call(this),n=await Pe({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht),recordId:e},queryParams:{columns:a,ifVersion:r},body:t,...s}),i=await fa(this,da,ua).call(this);return va(pa(this,Kt),i,pa(this,Ht),n,a)},na=new WeakSet,ia=async function(e,t=["*"]){const a=await pa(this,jt).call(this);try{const r=await Ie({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}",tableName:pa(this,Ht),recordId:e},queryParams:{columns:t},...a}),s=await fa(this,da,ua).call(this);return va(pa(this,Kt),s,pa(this,Ht),r,t)}catch(r){if(o(r)&&404===r.status)return null;throw r}},oa=new WeakSet,ca=async function(e,t,a){await pa(this,Vt).set(`query_${pa(this,Ht)}:${e.key()}`,{date:new Date,meta:t,records:a})},la=new WeakSet,ha=async function(e){const t=`query_${pa(this,Ht)}:${e.key()}`,a=await pa(this,Vt).get(t);if(!a)return null;const{cache:r=pa(this,Vt).defaultQueryTTL}=e.getQueryOptions();if(r<0)return null;const s=a.date.getTime()+r<Date.now();return s?null:a},da=new WeakSet,ua=async function(){if(pa(this,Xt))return pa(this,Xt);const e=await pa(this,jt).call(this),{schema:t}=await L({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},...e});return ga(this,Xt,t.tables),t.tables};const ya=e=>Object.entries(e).reduce(((e,[t,a])=>"xata"===t?e:{...e,[t]:Mt(a)?a.id:a}),{}),va=(e,t,a,r,s)=>{const n={},{xata:i,...c}=r??{};Object.assign(n,c);const{columns:l}=t.find((({name:e})=>e===a))??{};l||console.error(`Table ${a} not found in schema`);for(const h of l??[]){if(!Aa(s,h))continue;const a=n[h.name];switch(h.type){case"datetime":{const e=void 0!==a?new Date(a):void 0;e&&isNaN(e.getTime())?console.error(`Failed to parse date ${a} for field ${h.name}`):e&&(n[h.name]=e);break}case"link":{const r=h.link?.table;if(r)if(o(a)){const i=s.reduce(((e,t)=>{if(t===h.name)return[...e,"*"];if(t.startsWith(`${h.name}.`)){const[,...a]=t.split(".");return[...e,a.join(".")]}return e}),[]);n[h.name]=va(e,t,r,a,i)}else n[h.name]=null;else console.error(`Failed to parse link for field ${h.name}`);break}default:n[h.name]=a??null,!0===h.notNull&&null===a&&console.error(`Parse error, column ${h.name} is non nullable and value resolves null`);break}}n.read=function(t){return e[a].read(n["id"],t)},n.update=function(t,r,s){const i=h(r)?r:["*"],o=Ba(r,s);return e[a].update(n["id"],t,i,{ifVersion:o})},n.replace=function(t,r,s){const i=h(r)?r:["*"],o=Ba(r,s);return e[a].createOrReplace(n["id"],t,i,{ifVersion:o})},n.delete=function(){return e[a].delete(n["id"])},n.getMetadata=function(){return i};for(const o of["read","update","replace","delete","getMetadata"])Object.defineProperty(n,o,{enumerable:!1});return Object.freeze(n),n};function ka(e){return o(e)&&Array.isArray(e.records)}function Na(e){return l(e)?e:o(e)&&l(e.id)?e.id:void 0}function Aa(e,t){if(e.includes("*"))return!0;if("link"===t.type){const a=e.filter((e=>e.startsWith(t.name)));return a.length>0}return e.includes(t.name)}function Ba(...e){for(const t of e)if(o(t)&&d(t.ifVersion))return t.ifVersion}var Ta,Ea=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},Pa=(e,t,a)=>(Ea(e,t,"read from private field"),a?a.call(e):t.get(e)),Ia=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},_a=(e,t,a,r)=>(Ea(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a);class xa{constructor(e={}){Ia(this,Ta,void 0),_a(this,Ta,new Map),this.capacity=e.max??500,this.defaultQueryTTL=e.defaultQueryTTL??6e4}async getAll(){return Object.fromEntries(Pa(this,Ta))}async get(e){return Pa(this,Ta).get(e)??null}async set(e,t){if(await this.delete(e),Pa(this,Ta).set(e,t),Pa(this,Ta).size>this.capacity){const e=Pa(this,Ta).keys().next().value;await this.delete(e)}}async delete(e){Pa(this,Ta).delete(e)}async clear(){return Pa(this,Ta).clear()}}Ta=new WeakMap;var Sa,Ra,Ca=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},Oa=(e,t,a)=>(Ca(e,t,"read from private field"),a?a.call(e):t.get(e)),Ua=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},Da=(e,t,a,r)=>(Ca(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a);class $a extends ht{constructor(e){super(),Ua(this,Sa,{}),Ua(this,Ra,void 0),Da(this,Ra,e)}build(e){const t=new Proxy({},{get:(a,r)=>{if(!l(r))throw new Error("Invalid table name");return void 0===Oa(this,Sa)[r]&&(Oa(this,Sa)[r]=new wa({db:t,pluginOptions:e,table:r,schemaTables:Oa(this,Ra)})),Oa(this,Sa)[r]}}),a=Oa(this,Ra)?.map((({name:e})=>e))??[];for(const r of a)t[r]=new wa({db:t,pluginOptions:e,table:r,schemaTables:Oa(this,Ra)});return t}}Sa=new WeakMap,Ra=new WeakMap;var Ma,Wa,La,qa,za,Ha=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},ja=(e,t,a)=>(Ha(e,t,"read from private field"),a?a.call(e):t.get(e)),Ka=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},Va=(e,t,a,r)=>(Ha(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a),Xa=(e,t,a)=>(Ha(e,t,"access private method"),a);class Fa extends ht{constructor(e,t){super(),this.db=e,Ka(this,Wa),Ka(this,qa),Ka(this,Ma,void 0),Va(this,Ma,t)}build({getFetchProps:e}){return{all:async(t,a={})=>{const r=await Xa(this,Wa,La).call(this,t,a,e),s=await Xa(this,qa,za).call(this,e);return r.map((e=>{const{table:t="orphan"}=e.xata;return{table:t,record:va(this.db,s,t,e,["*"])}}))},byTable:async(t,a={})=>{const r=await Xa(this,Wa,La).call(this,t,a,e),s=await Xa(this,qa,za).call(this,e);return r.reduce(((e,t)=>{const{table:a="orphan"}=t.xata,r=e[a]??[],n=va(this.db,s,a,t,["*"]);return{...e,[a]:[...r,n]}}),{})}}}}Ma=new WeakMap,Wa=new WeakSet,La=async function(e,t,a){const r=await a(),{tables:s,fuzziness:n,highlight:i,prefix:o}=t??{},{records:c}=await Se({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},body:{tables:s,query:e,fuzziness:n,prefix:o,highlight:i},...r});return c},qa=new WeakSet,za=async function(e){if(ja(this,Ma))return ja(this,Ma);const t=await e(),{schema:a}=await L({pathParams:{workspace:"{workspaceId}",dbBranchName:"{dbBranch}",region:"{region}"},...t});return Va(this,Ma,a.tables),a.tables};const Qa=e=>"function"===typeof e;async function Ga(e){const{branch:t,envBranch:a}=p();if(t){const a=await Ya(t,e);if(a)return t;console.warn(`Branch ${t} not found in Xata. Ignoring...`)}const r=a||await y();return Ja(r,e)}async function Ja(e,t){const a=t?.databaseURL||Za(),s=t?.apiKey||v();if(!a)throw new Error("A databaseURL was not defined. Either set the XATA_DATABASE_URL env variable or pass the argument explicitely");if(!s)throw new Error("An API key was not defined. Either set the XATA_API_KEY env variable or pass the argument explicitely");const[n,,i,,o]=a.split("/"),c=lt(i);if(!c)throw new Error(`Unable to parse workspace and region: ${a}`);const{workspace:l,region:h}=c,{fallbackBranch:d}=p(),{branch:u}=await Q({apiKey:s,apiUrl:a,fetchImpl:k(t?.fetchImpl),workspacesApiUrl:`${n}//${i}`,pathParams:{dbName:o,workspace:l,region:h},queryParams:{gitBranch:e,fallbackBranch:d},trace:r});return u}async function Ya(e,t){const a=t?.databaseURL||Za(),s=t?.apiKey||v();if(!a)throw new Error("A databaseURL was not defined. Either set the XATA_DATABASE_URL env variable or pass the argument explicitely");if(!s)throw new Error("An API key was not defined. Either set the XATA_API_KEY env variable or pass the argument explicitely");const[n,,i,,c]=a.split("/"),l=lt(i);if(!l)throw new Error(`Unable to parse workspace and region: ${a}`);const{workspace:h,region:d}=l;try{return await L({apiKey:s,apiUrl:a,fetchImpl:k(t?.fetchImpl),workspacesApiUrl:`${n}//${i}`,pathParams:{dbBranchName:`${c}:${e}`,workspace:h,region:d},trace:r})}catch(u){if(o(u)&&404===u.status)return null;throw u}}function Za(){try{const{databaseURL:e}=p();return e}catch(e){return}}var er=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},tr=(e,t,a)=>(er(e,t,"read from private field"),a?a.call(e):t.get(e)),ar=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},rr=(e,t,a,r)=>(er(e,t,"write to private field"),r?r.call(e,a):t.set(e,a),a),sr=(e,t,a)=>(er(e,t,"access private method"),a);const nr=e=>{var t,a,s,n,i,o,c,l,h;return h=class{constructor(r={},l){ar(this,s),ar(this,i),ar(this,c),ar(this,t,void 0),ar(this,a,void 0);const h=sr(this,s,n).call(this,r);rr(this,a,h);const d={getFetchProps:()=>sr(this,i,o).call(this,h),cache:h.cache,trace:h.trace},u=new $a(l).build(d),m=new Fa(u,l).build(d);this.db=u,this.search=m;for(const[t,a]of Object.entries(e??{})){if(void 0===a)continue;const e=a.build(d);e instanceof Promise?e.then((e=>{this[t]=e})):this[t]=e}}async getConfig(){const e=tr(this,a).databaseURL,t=await tr(this,a).branch();return{databaseURL:e,branch:t}}},t=new WeakMap,a=new WeakMap,s=new WeakSet,n=function(e){const t=k(e?.fetch),a=e?.databaseURL||Za(),s=e?.apiKey||v(),n=e?.cache??new xa({defaultQueryTTL:0}),i=e?.trace??r,o=async()=>void 0!==e?.branch?await sr(this,c,l).call(this,e.branch):await Ga({apiKey:s,databaseURL:a,fetchImpl:e?.fetch});if(!s)throw new Error("Option apiKey is required");if(!a)throw new Error("Option databaseURL is required");return{fetch:t,databaseURL:a,apiKey:s,branch:o,cache:n,trace:i,clientID:dt()}},i=new WeakSet,o=async function({fetch:e,apiKey:t,databaseURL:a,branch:r,trace:s,clientID:n}){const i=await sr(this,c,l).call(this,r);if(!i)throw new Error("Unable to resolve branch value");return{fetchImpl:e,apiKey:t,apiUrl:"",workspacesApiUrl:(e,t)=>{const r=t.dbBranchName??t.branch,s=e.replace(/^\/db\/[^/]+/,void 0!==r?`:${i}`:"");return a+s},trace:s,clientID:n}},c=new WeakSet,l=async function(e){if(tr(this,t))return tr(this,t);if(void 0===e)return;const a=Array.isArray(e)?[...e]:[e],r=async e=>Qa(e)?await e():e;for await(const s of a){const e=await r(s);if(e)return rr(this,t,e),e}},h};class ir extends(nr()){}const or="__",cr="___";class lr{constructor(){this.classes={}}add(e){this.classes[e.name]=e}toJSON(e){function t(e){if(Array.isArray(e))return e.map(t);const a=typeof e;if("undefined"===a)return{[or]:"undefined"};if("bigint"===a)return{[or]:"bigint",[cr]:e.toString()};if(null===e||"object"!==a)return e;const r=e.constructor,s={[or]:r.name};for(const[n,i]of Object.entries(e))s[n]=t(i);return r===Date&&(s[cr]=e.toISOString()),r===Map&&(s[cr]=Object.fromEntries(e)),r===Set&&(s[cr]=[...e]),s}return JSON.stringify(t(e))}fromJSON(e){return JSON.parse(e,((e,t)=>{if(t&&"object"===typeof t&&!Array.isArray(t)){const{[or]:e,[cr]:a,...r}=t,s=this.classes[e];if(s)return Object.assign(Object.create(s.prototype),r);if("Date"===e)return new Date(a);if("Set"===e)return new Set(a);if("Map"===e)return new Map(Object.entries(a));if("bigint"===e)return BigInt(a);if("undefined"===e)return;return r}return t}))}}new lr;class hr extends Error{constructor(e,t){super(e),this.status=t}}const dr=[{name:"users",columns:[{name:"password",type:"string"},{name:"email",type:"email"},{name:"username",type:"string"}]}],ur=nr(),mr={databaseURL:"https://Olufunke-Moronfolu-s-workspace-vj48pf.us-east-1.xata.sh/db/invoice-generator",apiKey:"add your api key here"};class pr extends ur{constructor(e){super({...mr,...e},dr)}}let br;const gr=()=>br||(br=new pr,br)}}]);
//# sourceMappingURL=sigin.1345ebbe.js.map